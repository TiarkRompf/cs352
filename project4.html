<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>CS352 by TiarkRompf</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header class="without-description">
        <h1>CS352</h1>
        <p></p>
        <p class="view"><a href="https://github.com/TiarkRompf/cs352">View the Project on GitHub <small>TiarkRompf/cs352</small></a></p>
        <ul>
          <li><a href="index.html"><strong>Home</strong></a></li>
        </ul>
      </header>
      <section>


      <div class="title">
        <h1>Project 4: Synthesis (Translation)</h1>
      </div>

      <blockquote>
        <p>Due 11:59pm Thursday Nov 5</p>
      </blockquote>


<h3>Useful Links</h3>
<ul>
  <li><a href="mojo.html">Mojo Syntax</a></li>
  <li><a href="https://www.cs.purdue.edu/homes/hosking/352/project/abi.pdf">AMD64 ABI</a></li>
</ul>
<h3>Description</h3>
    <p>You will implement translation to Intermediate Code Trees, as described in Chapter 7, by traversing the Abstract Syntax Tree (AST) generated by the parser, and translating into intermediate code trees.</p>
<h3>Resources</h3>
    <p>Before starting this project, familiarize yourself with Chapter 6 and 7 of the textbook. In addition to the lectures, this will give you a solid foundation for starting your translator.</a>
<h3>Getting Started</h3>
    <p>Source code is available in a tarball in the /homes/cs352 directory, which can be copied into your working directory and expanded by doing the following:<br>
<pre>
cp /homes/cs352/Fall15/project4.tar.gz ./
tar -xvf 
</pre>
<p>If you wish to integrate the project into an Eclipse project, follow the directions <a href=http://devblog.alexsapps.com/2012/04/using-makefile-in-eclipse-java-project.html>on this blogpost</a> to create an Eclipse project using the included Makefile.</p>
<p>All changes for this project will be done to the translation file mojo/Translate.java in the project4/src subdirectory. Note that the class mojo.Translate extends class mojo.Semant from your previous project, and itself makes use of methods from that class. You can see the source code for those methods in mojo.Semant from your previous project, but we have provided you the canonical implementation of that class as a binary class file.</p>
<p>To make the project, type "make" as per usual. To run your project, go into the bin directory and type:<br>
<pre>
./p4.sh <i>file.mj</i>
</pre>
where <i>file.mj</i> is a Mojo source code file. This will print out the IR tree that you have synthesized.
</p>
<h3>Tests</h3>
<p>A litany of tests have been included in the <i>p4tests</i> directory in the base directory of the project. Run these on your translator to check for correct functionality. Each test is a Mojo file. Note that your output need not be identical to the output shown in the included PDF, as long as it represents the correct translation of the AST that comes from the code in each test.</p>
<h3>Hints</h3>
<p>In this project, you will be traversing the AST as in the previous project and converting it into intermediate code trees.</p><p>
For each procedure we create a Translate.Frame object to represent the activation record for the procedure. Local variables in each procedure are represented as temporaries (Translate.Temp). Two methods are used to reserve space as needed for both local variables and formal parameters in each method: Translate.Frame.allocFormal and Translate.Frame.allocLocal. Both of these methods return a Translate.Frame.Access object that can be used to generate code to access the corresponding variable. We maintain a map from variables to their corresponding Translate.Frame.Access object. In the intermediate code a temporary is similar to a register on an actual processor.</p><p>
The intermediate code tree (Translate.Tree) comprises objects of two main types: Translate.Tree.Exp and Translate.Tree.Stm. However, these classes are abstract so the objects in the trees will be instances of concrete subclasses of these types.</p><p>
For each method in each class we create a Translate.Frame and a method body (a tree rooted at a Translate.Tree.Stm). The Translate.Frame and the body together form a fragment of code (in this case a Translate.Frag.Proc). Each Translate.Frag.Proc is added to the linked list called frags.</p>
<h3>Turnin</h3>
<p>
You should turn in your src/mojo/Translate.java file, using the <tt>turnin</tt> command available on CS Unix machines. To turn in your project, make sure that you are in the directory that contains your Translate.java file (src/mojo). Then type the following:
</p>
<pre>
turnin -c cs352 -p project4 Translate.java
</pre>
<p>To verify your turned-in work, do:</p>
<pre>
turnin -c cs352 -p project4 -v
</pre>
<h3>Grading</h3>
<p>We will create a set of test cases, and then compare the output of your solution to our reference implementation. Grading test cases are intended to test separable functionality of your translation. Towards the end of the project period, we may release the results of our own tests to demonstrate what the translator should produce.</p>
<p>There will be a reconciliation period after initial grading when you will be able to compare outputs of your translator with those of the reference implementation, and you may then offer simple fixes for the TAs to apply to your implementation to improve your grade. These fixes will be accepted only at the discretion of the TAs and the instructor. We will judge what "simple" means!</p>
<p>The reconciliation period is only intended for you to be able to fix simple problems that you may have mistakenly overlooked. Thus, you must make sure to test your implementation thoroughly.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/TiarkRompf">TiarkRompf</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
